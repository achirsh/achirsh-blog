<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" />
    <script type="application/javascript" src='https://blog.achirsh.site/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://blog.achirsh.site/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://blog.achirsh.site/css/github.min.css' />
    <link rel="stylesheet" href='https://blog.achirsh.site/css/github-style.css' />
    <link rel="stylesheet" href='https://blog.achirsh.site/css/light.css' />
    <link rel="stylesheet" href='https://blog.achirsh.site/css/dark.css' />
    <link rel="stylesheet" href='https://blog.achirsh.site/css/syntax.css' />
    <title>React-Native依赖项目配置整理 - achirsh blog</title>
    
    <link rel="icon" type="image/x-icon" href='/images/github.png'>
    
    <meta name="theme-color" content="#1e2327">

    
    <meta name="description"
  content="React-Native依赖项目配置整理" />
<meta name="keywords"
  content='blog, google analytics' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://blog.achirsh.site/post/react-natvie/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="React-Native依赖项目配置整理 - achirsh blog" />
<meta name="twitter:description"
  content="React-Native依赖项目配置整理" />
<meta name="twitter:site" content="https://blog.achirsh.site/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="https://blog.achirsh.site/">


<meta property="og:type" content="article" />
<meta property="og:title" content="React-Native依赖项目配置整理 - achirsh blog">
<meta property="og:description"
  content="React-Native依赖项目配置整理" />
<meta property="og:url" content="https://blog.achirsh.site/post/react-natvie/" />
<meta property="og:site_name" content="React-Native依赖项目配置整理" />
<meta property="og:image"
  content="https://blog.achirsh.site/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2021-09-13 00:00:00 &#43;0000 UTC" />










</head>

<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on" style="justify-content: space-between;">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://blog.achirsh.site/">
        <svg class="octicon" height="32" viewBox="0 0 16 16" version="1.1" width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>

    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>
  
<script src="https://unpkg.com/@popperjs/core@2"></script>
<script src="https://unpkg.com/tippy.js@6"></script>
<div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://blog.achirsh.site/">
                  <img class=" avatar-user"
                    src="https://blog.achirsh.site/images/avatar.png"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://blog.achirsh.site/">achirsh</a></span><span
                    class="path-divider">/</span><strong class="css-truncate-target mr-1" style="max-width: 410px"><a
                      href="https://blog.achirsh.site/post/react-natvie/">React-Native依赖项目配置整理</a></strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Mon, 13 Sep 2021 00:00:00 &#43;0000"
                    class="no-wrap">
                    Mon, 13 Sep 2021 00:00:00 &#43;0000</relative-time>

                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" class="btn btn-octicon m-0 mr-2 p-2" aria-haspopup="menu" aria-label="Table of Contents" role="button">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                          488 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5">
                <article class="markdown-body entry-content container-lg"><h1 id="react-native-依赖项目配置整理">React-Native 依赖项目配置整理</h1>
<h2 id="1-android">1. Android</h2>
<h3 id="11-修改buildgradle">1.1. 修改build.gradle</h3>
<pre tabindex="0"><code>allprojects {
    repositories {
        jcenter()
        maven { url &#34;https://maven.google.com&#34; }
        maven {
            // All of React Native (JS, Android binaries) is installed from npm
            url &#34;$rootDir/rncomponent_sdk/node_modules/react-native/android&#34;
        }
    }
}
</code></pre><h3 id="12-修改settingsgradle">1.2. 修改settings.gradle</h3>
<pre tabindex="0"><code>include &#39;:react-native-image-picker&#39;
project(&#39;:react-native-image-picker&#39;).projectDir = new File(rootProject.projectDir, &#39;./rncomponent_sdk/node_modules/react-native-image-picker/android&#39;)
</code></pre><h3 id="13-配置权限">1.3. 配置权限</h3>
<pre tabindex="0"><code>&lt;uses-permission android:name=&#34;android.permission.INTERNET&#34; /&gt;
&lt;uses-permission android:name=&#34;android.permission.CAMERA&#34; /&gt;
&lt;uses-permission android:name=&#34;android.permission.WRITE_EXTERNAL_STORAGE&#34;/&gt;
</code></pre><h2 id="2-ios">2. iOS</h2>
<h3 id="21-删除tvos依赖">2.1. 删除TVOS依赖</h3>
<p><strong>在xcode中打开项目并删除libRNSVG-tvOS.a的依赖</strong></p>
<h3 id="22-修改podfile">2.2. 修改Podfile</h3>
<p><strong>添加如下代码</strong></p>
<pre tabindex="0"><code>pod &#39;React&#39;, :path =&gt; &#39;./RNComponent/node_modules/react-native&#39;, :subspecs =&gt; [

  &#39;Core&#39;,

  &#39;ART&#39;,

  &#39;CxxBridge&#39;,

  &#39;DevSupport&#39;, # Include this to enable In-App Devmenu if RN &gt;= 0.43

  &#39;RCTText&#39;,

  &#39;RCTAnimation&#39;,

  &#39;RCTActionSheet&#39;,

  &#39;RCTGeolocation&#39;,

  &#39;RCTImage&#39;,

  &#39;RCTNetwork&#39;,

  &#39;RCTPushNotification&#39;,

  &#39;RCTSettings&#39;,

  &#39;RCTVibration&#39;,

  &#39;RCTLinkingIOS&#39;,

  &#39;RCTWebSocket&#39;, # needed for debugging

  # Add any other subspecs you want to use in your project

]

# Explicitly include Yoga if you are using RN &gt;= 0.42.0

pod &#39;yoga&#39;, :path =&gt; &#39;./RNComponent/node_modules/react-native/ReactCommon/yoga&#39;

# Third party deps podspec link

pod &#39;DoubleConversion&#39;, :podspec =&gt; &#39;./node_modules/react-native/third-party-podspecs/DoubleConversion.podspec&#39;

pod &#39;GLog&#39;, :podspec =&gt; &#39;./node_modules/react-native/third-party-podspecs/GLog.podspec&#39;

pod &#39;Folly&#39;, :podspec =&gt; &#39;./node_modules/react-native/third-party-podspecs/Folly.podspec&#39;

pod &#39;react-native-image-picker&#39;, :path =&gt; &#39;./node_modules/react-native-image-picker&#39;
</code></pre><p><strong>然后在项目下执行: pod install</strong></p>
<h3 id="23-配置权限">2.3. 配置权限</h3>
<p><strong>设置camera、photo library使用权限</strong></p>
<pre tabindex="0"><code>&lt;!-- 相册 --&gt;   
&lt;key&gt;NSPhotoLibraryUsageDescription&lt;/key&gt;   
&lt;string&gt;App需要您的同意,才能访问相册&lt;/string&gt;   
&lt;!-- 相机 --&gt;   
&lt;key&gt;NSCameraUsageDescription&lt;/key&gt;   
&lt;string&gt;App需要您的同意,才能访问相机&lt;/string&gt;   
</code></pre><h3 id="24-集成到原生项目中">2.4. 集成到原生项目中</h3>
<p><strong>创建一个ViewController</strong></p>
<pre tabindex="0"><code>- (void)viewDidLoad {
    [super viewDidLoad];
    
    NSString * strUrl = @&#34;http://localhost:8081/index.ios.bundle?platform=ios&amp;dev=true&#34;;
    NSURL * jsCodeLocation = [NSURL URLWithString:strUrl];
    
    RCTRootView * rootView = [[RCTRootView alloc] initWithBundleURL:jsCodeLocation
                                                         moduleName:@&#34;NativeRN&#34;
                                                  initialProperties:nil
                                                      launchOptions:nil];
    self.view = rootView;
    
}
</code></pre><h3 id="25-配置infoplist">2.5. 配置info.plist</h3>
<p><strong>还需要在info.plist文件中配置一下</strong></p>
<pre tabindex="0"><code>&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;
  &lt;dict&gt;
    &lt;key&gt;NSExceptionDomains&lt;/key&gt;
    &lt;dict&gt;
      &lt;key&gt;localhost&lt;/key&gt;
      &lt;dict&gt;
       &lt;key&gt;NSTemporaryExceptionAllowsInsecureHTTPLoads&lt;/key&gt;
       &lt;true/&gt;
      &lt;/dict&gt;
    &lt;/dict&gt;
  &lt;/dict&gt;
</code></pre></article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
<script>
 
 
 
 window.onload = function () {
   const header = document.getElementById('post-header');
   const headerHeight = header.offsetHeight;
   
   document.documentElement.style.scrollPaddingTop = headerHeight + 10 + "px";
 }

 const tocToggleButton = document.getElementById("toc-toggle");

 const tippyInstance = tippy('#toc-toggle', {
  trigger: 'click',
  content: '<div id="table-of-contents">\u003cnav id=\u0022TableOfContents\u0022\u003e\n  \u003cul\u003e\n    \u003cli\u003e\u003ca href=\u0022#1-android\u0022\u003e1. Android\u003c\/a\u003e\n      \u003cul\u003e\n        \u003cli\u003e\u003ca href=\u0022#11-修改buildgradle\u0022\u003e1.1. 修改build.gradle\u003c\/a\u003e\u003c\/li\u003e\n        \u003cli\u003e\u003ca href=\u0022#12-修改settingsgradle\u0022\u003e1.2. 修改settings.gradle\u003c\/a\u003e\u003c\/li\u003e\n        \u003cli\u003e\u003ca href=\u0022#13-配置权限\u0022\u003e1.3. 配置权限\u003c\/a\u003e\u003c\/li\u003e\n      \u003c\/ul\u003e\n    \u003c\/li\u003e\n    \u003cli\u003e\u003ca href=\u0022#2-ios\u0022\u003e2. iOS\u003c\/a\u003e\n      \u003cul\u003e\n        \u003cli\u003e\u003ca href=\u0022#21-删除tvos依赖\u0022\u003e2.1. 删除TVOS依赖\u003c\/a\u003e\u003c\/li\u003e\n        \u003cli\u003e\u003ca href=\u0022#22-修改podfile\u0022\u003e2.2. 修改Podfile\u003c\/a\u003e\u003c\/li\u003e\n        \u003cli\u003e\u003ca href=\u0022#23-配置权限\u0022\u003e2.3. 配置权限\u003c\/a\u003e\u003c\/li\u003e\n        \u003cli\u003e\u003ca href=\u0022#24-集成到原生项目中\u0022\u003e2.4. 集成到原生项目中\u003c\/a\u003e\u003c\/li\u003e\n        \u003cli\u003e\u003ca href=\u0022#25-配置infoplist\u0022\u003e2.5. 配置info.plist\u003c\/a\u003e\u003c\/li\u003e\n      \u003c\/ul\u003e\n    \u003c\/li\u003e\n  \u003c\/ul\u003e\n\u003c\/nav\u003e</div>',
  allowHTML: true,
  placement: 'bottom-start',
  interactive: true,
  arrow: false,
  maxWidth: "none",
  onHide: function () { tocToggleButton.classList.remove("hover"); },
  onShow: function () { tocToggleButton.classList.add("hover"); },
  onShown: function () {
    selectTableOfContentsOption();

    if (window.hasSetupTableOfContentsListeners) {
      return;
    }

    const tableOfContents = document.getElementById("table-of-contents");
    tableOfContents.addEventListener('click', function () {
      
      tippyInstance[0].hide();
    });

    window.hasSetupTableOfContentsListeners = true;
  }
 });

 function selectTableOfContentsOption () {
   const optionSelectedClass = 'table-of-contents-option-selected';

   const tableOfContentsOptions = document.querySelectorAll("#table-of-contents > nav > ul li");

   for (const option of tableOfContentsOptions) {
     

     const [child] = option.children;
     if (child.tagName.toLowerCase() !== 'a') {
       continue;
     }

     if (window.location.href === child.href) {
       child.classList.add(optionSelectedClass);
     } else {
       child.classList.remove(optionSelectedClass);
     }
   }
 }

 window.onhashchange = selectTableOfContentsOption;
</script>


</body>

<script type="application/javascript" src="https://blog.achirsh.site/js/github-style.js"></script>



</html>