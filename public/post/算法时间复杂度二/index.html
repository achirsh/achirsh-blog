<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" />
    <script type="application/javascript" src='https://blog.achirsh.site/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://blog.achirsh.site/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://blog.achirsh.site/css/github.min.css' />
    <link rel="stylesheet" href='https://blog.achirsh.site/css/github-style.css' />
    <link rel="stylesheet" href='https://blog.achirsh.site/css/light.css' />
    <link rel="stylesheet" href='https://blog.achirsh.site/css/dark.css' />
    <link rel="stylesheet" href='https://blog.achirsh.site/css/syntax.css' />
    <title>算法时间复杂度（二） - achirsh blog</title>
    
    <link rel="icon" type="image/x-icon" href='/images/github.png'>
    
    <meta name="theme-color" content="#1e2327">

    
    <meta name="description"
  content="算法时间复杂度（二）" />
<meta name="keywords"
  content='blog, google analytics' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://blog.achirsh.site/post/%E7%AE%97%E6%B3%95%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E4%BA%8C/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="算法时间复杂度（二） - achirsh blog" />
<meta name="twitter:description"
  content="算法时间复杂度（二）" />
<meta name="twitter:site" content="https://blog.achirsh.site/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="https://blog.achirsh.site/">


<meta property="og:type" content="article" />
<meta property="og:title" content="算法时间复杂度（二） - achirsh blog">
<meta property="og:description"
  content="算法时间复杂度（二）" />
<meta property="og:url" content="https://blog.achirsh.site/post/%E7%AE%97%E6%B3%95%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E4%BA%8C/" />
<meta property="og:site_name" content="算法时间复杂度（二）" />
<meta property="og:image"
  content="https://blog.achirsh.site/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2021-11-01 00:00:00 &#43;0000 UTC" />










</head>

<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on" style="justify-content: space-between;">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://blog.achirsh.site/">
        <svg class="octicon" height="32" viewBox="0 0 16 16" version="1.1" width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>

    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>
  
<script src="https://unpkg.com/@popperjs/core@2"></script>
<script src="https://unpkg.com/tippy.js@6"></script>
<div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://blog.achirsh.site/">
                  <img class=" avatar-user"
                    src="https://blog.achirsh.site/images/avatar.png"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://blog.achirsh.site/">achirsh</a></span><span
                    class="path-divider">/</span><strong class="css-truncate-target mr-1" style="max-width: 410px"><a
                      href="https://blog.achirsh.site/post/%E7%AE%97%E6%B3%95%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E4%BA%8C/">算法时间复杂度（二）</a></strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Mon, 01 Nov 2021 00:00:00 &#43;0000"
                    class="no-wrap">
                    Mon, 01 Nov 2021 00:00:00 &#43;0000</relative-time>

                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" class="btn btn-octicon m-0 mr-2 p-2" aria-haspopup="menu" aria-label="Table of Contents" role="button">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                          2086 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5">
                <article class="markdown-body entry-content container-lg"><p>这篇文章讲解：递归算法的时间复杂度(recursive algorithm time complexity)、最好情况时间复杂度(best case time complexity)、最坏情况时间复杂度(worst case time complexity)、平均时间复杂度(average case time complexity)和均摊时间复杂度(amortized  time complexity)</p>
<h1 id="递归算法的时间复杂度">递归算法的时间复杂度</h1>
<p>如果递归函数中，只进行一次递归调用，递归深度为depth</p>
<p>在每个递归的函数中，时间复杂度为T</p>
<p>则总体的时间复杂度为O(T * depth)</p>
<p>在前面的学习中，归并排序与快速排序都带有递归的意思，并且时间复杂度都是O(nlogn),但并不是有递归的函数就一定是O(nlogn)级别的。从以下两种情况进行分析。</p>
<h2 id="1递归中进行一次递归调用的复杂度分析">1、递归中进行一次递归调用的复杂度分析</h2>
<p>二分查找法</p>
<p><img src="https://green-plant-0cfb12300.azurestaticapps.net/img/5498fd99e80aaf17e200.gif" alt="image"></p>
<pre tabindex="0"><code>  int binarySearch(int arr[], int l, int r, int target) {
    if (l &gt; r) return -1

    int mid = l + (r - 1) / 2
    if (arr[mid] === target) return mid
    else if (arr[mid] &gt; target)
    return binarySearch(arr, l, mid - 1, target)
    else 
    return binarySearch(arr, mid + 1, target)
  }
</code></pre><p>比如在这段二分查找法的代码中，每次在[l, r]范围中去查找目标的位置，如果中间的元素arr[min]不是target，那么判断arr[mid]是比target大还是小，进而再次调用binarySearch这个函数</p>
<p>在这个递归函数中，每一次没有找到target时，那么调用左边的binarySearch函数，要么调用右边的binarySearch函数，也就是说在此次递归中，最多调用了一次递归调用而已。根据数学知识，需要log2n次才能递归到底。因此，二分查找法的时间复杂度为O(logn)</p>
<p>求和</p>
<p><img src="https://green-plant-0cfb12300.azurestaticapps.net/img/37f7a4938f9fb7c6ff01.gif" alt="image"></p>
<pre tabindex="0"><code>  int sum(int n) {
    if (n == 0) return 0
    return n + sum(n - 1)
  }
</code></pre><p>在这段代码中比较容易理解理解递归深度随输入n的增加而线性递增，因此时间复杂度为O(n)</p>
<p>求幂</p>
<p><img src="https://green-plant-0cfb12300.azurestaticapps.net/img/e4f5a283830adc588aca.gif" alt="image"></p>
<pre tabindex="0"><code>  // 递归深度：logn
  // 时间复杂度：O(logn)
  double pow(double x, int n) {
    if (n == 0) return 1.0

    double t = pow(x, n / 2)
    if (n % 2) return x * t * t
    return t * t
  }
</code></pre><p>递归深度为logn，因为是求需要除以2多少次才能到底。</p>
<h2 id="2递归中进行多次递归调用的复杂度分析">2、递归中进行多次递归调用的复杂度分析</h2>
<p>递归算法中比较难计算的事多次递归调用</p>
<p>先看下面这段代码，有两次递归调用。</p>
<pre tabindex="0"><code>  // O(2^n)指数级别的数量级，后续动态规划的优化点
  int f(int n) {
    if (n == 0) return 1
    return f(n - 1) + f(n - 1)
  }
</code></pre><p><img src="https://green-plant-0cfb12300.azurestaticapps.net/img/b32b1a361c29b50711d8.gif" alt="image"></p>
<p>递归树中节点数就是diamante计算的调用次数</p>
<p>比如当n=3时，调用次数计算公式为</p>
<p>1 + 2 + 4 + 8 = 15</p>
<p>一般的，调用次数计算公式为</p>
<pre tabindex="0"><code>  2^0 + 2^1 + 2^2 + …… + 2^n
  = 2^(n+1) - 1
  = O(2^n)
</code></pre><p><img src="https://green-plant-0cfb12300.azurestaticapps.net/img/f4c8dd7c864b7ab914be.gif" alt="image"></p>
<p>与之有所类似的是 归并排序 的递归树，区别点在于</p>
<p>1、上述例子的树的深度为n，而 归并排序 的递归树深度为logn
2、上述例子中每次处理的数据规模是一样的，而在归并排序中每个节点处理的数据规模是逐渐缩小的</p>
<p>因此，在如 归并排序 等排序算法中，每一层处理的数据量为O(n)级别，同时有logn层，时间复杂度便是O(nlogn)</p>
<h1 id="最好最坏情况时间复杂度">最好、最坏情况时间复杂度</h1>
<p><img src="https://green-plant-0cfb12300.azurestaticapps.net/img/517ac0312562b7c34e22.gif" alt="image"></p>
<p>最好、最坏情况时间复杂度指的是特殊情况下的时间复杂度。</p>
<p>动图表明的是在数组array中寻找变量x第一次出现的位置，若没有找到，则返回-1；否则返回位置下标。</p>
<pre tabindex="0"><code>  int find(int [] array, int n, int x) {
    for (int i = 0; i &lt; n; i++) {
      if (array[i] == x) {
        return i
        break
      }
    }
    return -1
  }
</code></pre><p>在这里当数组中第一个元素就是要找的x时，时间复杂度是O(1)，而当最后一个元素才是x时，时间复杂度是O(n)</p>
<p>最好情况时间复杂度就是在最理想情况下执行代码的时间复杂度，它的时间是最短的；最坏情况时间复杂度就是在最糟糕情况下执行代码的时间复杂度，它的时间是最长的。</p>
<h1 id="平均情况时间复杂度">平均情况时间复杂度</h1>
<p>最好、最坏时间复杂度就是在极端条件下的复杂度，发生的概率不大，不能代表平均水平。那么为了更好的表示平均情况下的算法复杂度，就需要引入平均情况时间复杂度。</p>
<p>平均情况时间复杂度可用代码在所有可能情况下执行次数的加权平均值表示。</p>
<p>还是以find函数为例，从概率的角度来看，x在数组中每一个位置的可能性都是相同的，为1/n。那么平均情况时间复杂度就可以用下面的方式计算：</p>
<pre><code>((1 + 2 + ... + n) / n + n ) / 2 = (3n + 1) / 4
</code></pre>
<p>find函数的平均时间复杂度为O(n)</p>
<h1 id="均摊复杂度分析">均摊复杂度分析</h1>
<p>我们通过一个动态数组的push_back操作来理解均摊复杂度。</p>
<p><img src="https://green-plant-0cfb12300.azurestaticapps.net/img/cb2b4c3f3299f6c47224.gif" alt="image"></p>
<p>template <!-- raw HTML omitted -->
class MyVector {
private:
T* data;
int size;          // 存储数组中的元素个数
int capacity;      // 存储数组中可以容纳的最大的元素个数
// 复杂度为O(n)
void resize(int newCapacity) {
T *newData = new T[newCapacity];
for (int i = 0; i &lt; size; i++) {
newData[i] = data[i]
}
data = newData
capacity = newCapacity
}</p>
<p>public:
MyVector() {
data = new T[100]
size = 0
capacity = 100
}
// 平均复杂度为O(1)
void push_back(T e) {
if (size == capacity) {
resize(2 * capacity)
data[size++] = e
}
}
// 平均复杂度为O(1)
T pop_back() {
size &ndash;;
return data[size]
}
}</p>
<p>push_back实现的功能是往数组的末尾添加一个元素，如果数组没有满，直接往后面插入元素；如果数组满了，即size == capacity，则将数组扩容一倍，然后再插入元素</p>
<p>例如，数组长度为n，则前n次调用push_back复杂度都为O(1)级别；在第n+1次则需要先进行n次元素转移操作，然后再进行1次插入操作，复杂度为O(n)</p>
<p>因此，平均来看：对于容量为n的动态数组，前面添加元素需要消耗了1<em>n的时间，扩容操作消耗n时间，总共就是2</em>n的时间，因此均摊时间复杂度为O(2n/n)=O(2)，也就是O(1)级别了。</p>
<p>可以得出一个比较有意思的结论：一个相对比较耗时的操作，如果能保证它不会每次都被触发，那么这个相对比较耗时的操作，它所相应的时间是可以分摊到其他的操作中来的。</p>
</article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
<script>
 
 
 
 window.onload = function () {
   const header = document.getElementById('post-header');
   const headerHeight = header.offsetHeight;
   
   document.documentElement.style.scrollPaddingTop = headerHeight + 10 + "px";
 }

 const tocToggleButton = document.getElementById("toc-toggle");

 const tippyInstance = tippy('#toc-toggle', {
  trigger: 'click',
  content: '<div id="table-of-contents">\u003cnav id=\u0022TableOfContents\u0022\u003e\n  \u003cul\u003e\n    \u003cli\u003e\u003ca href=\u0022#1递归中进行一次递归调用的复杂度分析\u0022\u003e1、递归中进行一次递归调用的复杂度分析\u003c\/a\u003e\u003c\/li\u003e\n    \u003cli\u003e\u003ca href=\u0022#2递归中进行多次递归调用的复杂度分析\u0022\u003e2、递归中进行多次递归调用的复杂度分析\u003c\/a\u003e\u003c\/li\u003e\n  \u003c\/ul\u003e\n\u003c\/nav\u003e</div>',
  allowHTML: true,
  placement: 'bottom-start',
  interactive: true,
  arrow: false,
  maxWidth: "none",
  onHide: function () { tocToggleButton.classList.remove("hover"); },
  onShow: function () { tocToggleButton.classList.add("hover"); },
  onShown: function () {
    selectTableOfContentsOption();

    if (window.hasSetupTableOfContentsListeners) {
      return;
    }

    const tableOfContents = document.getElementById("table-of-contents");
    tableOfContents.addEventListener('click', function () {
      
      tippyInstance[0].hide();
    });

    window.hasSetupTableOfContentsListeners = true;
  }
 });

 function selectTableOfContentsOption () {
   const optionSelectedClass = 'table-of-contents-option-selected';

   const tableOfContentsOptions = document.querySelectorAll("#table-of-contents > nav > ul li");

   for (const option of tableOfContentsOptions) {
     

     const [child] = option.children;
     if (child.tagName.toLowerCase() !== 'a') {
       continue;
     }

     if (window.location.href === child.href) {
       child.classList.add(optionSelectedClass);
     } else {
       child.classList.remove(optionSelectedClass);
     }
   }
 }

 window.onhashchange = selectTableOfContentsOption;
</script>


</body>

<script type="application/javascript" src="https://blog.achirsh.site/js/github-style.js"></script>



</html>